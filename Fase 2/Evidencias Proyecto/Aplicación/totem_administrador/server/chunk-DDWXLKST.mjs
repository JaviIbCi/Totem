import './polyfills.server.mjs';
import{a as g}from"./chunk-MYRRTMDS.mjs";import{a as w}from"./chunk-NEDADJCY.mjs";import{a,c as l}from"./chunk-ZW4IHJJG.mjs";import{B as n,U as h,Z as p,o}from"./chunk-EC3LRZMX.mjs";var m=class i{constructor(e,t){this.http=e;this.renewService=t}apiUrl=w.apiUrl;getFirstPageWithActiveStatus(){let e=localStorage.getItem("accessToken"),t=new a({Authorization:`Bearer ${e}`});return this.http.get(`${this.apiUrl}news/instagram/first-page`,{headers:t}).pipe(o(1e4),n(r=>(console.log(r),this.renewService.handleTokenError(r,()=>this.getFirstPageWithActiveStatus()))))}getInstagramPostsByPage(e,t){let r=localStorage.getItem("accessToken"),s=new a({Authorization:`Bearer ${r}`});return this.http.get(`${this.apiUrl}news/instagram/page?cursorType=${e}&cursorValue=${t}`,{headers:s}).pipe(o(1e4),n(c=>this.renewService.handleTokenError(c,()=>this.getInstagramPostsByPage(e,t))))}addInstagramNews(e){let t=localStorage.getItem("accessToken"),r=new a({Authorization:`Bearer ${t}`});return this.http.post(`${this.apiUrl}news/instagram/news`,{instagramId:e},{headers:r}).pipe(o(1e4),n(s=>this.renewService.handleTokenError(s,()=>this.addInstagramNews(e))))}deleteInstagramNews(e){let t=localStorage.getItem("accessToken"),r=new a({Authorization:`Bearer ${t}`});return this.http.delete(`${this.apiUrl}news/instagram/news/${e}`,{headers:r}).pipe(o(1e4),n(s=>this.renewService.handleTokenError(s,()=>this.deleteInstagramNews(e))))}createAutomaticNews(e){let t=localStorage.getItem("accessToken"),r=new a({Authorization:`Bearer ${t}`});return this.http.post(`${this.apiUrl}news/instagram/automatic`,{type:e},{headers:r}).pipe(o(1e4),n(s=>this.renewService.handleTokenError(s,()=>this.createAutomaticNews(e))))}getAllNews(){let e=localStorage.getItem("accessToken"),t=new a({Authorization:`Bearer ${e}`});return this.http.get(`${this.apiUrl}news/all`,{headers:t}).pipe(n(r=>this.renewService.handleTokenError(r,()=>this.getAllNews())))}createOwnNews(e){let t=localStorage.getItem("accessToken"),r=new a({Authorization:`Bearer ${t}`});return this.http.post(`${this.apiUrl}news/own`,e,{headers:r}).pipe(n(s=>this.renewService.handleTokenError(s,()=>this.createOwnNews(e))))}updateOwnNews(e,t){let r=localStorage.getItem("accessToken"),s=new a({Authorization:`Bearer ${r}`});return this.http.put(`${this.apiUrl}news/own/${e}`,t,{headers:s}).pipe(n(c=>this.renewService.handleTokenError(c,()=>this.updateOwnNews(e,t))))}deleteNews(e){let t=localStorage.getItem("accessToken"),r=new a({Authorization:`Bearer ${t}`});return this.http.delete(`${this.apiUrl}news/${e}`,{headers:r}).pipe(n(s=>this.renewService.handleTokenError(s,()=>this.deleteNews(e))))}reorderNews(e){let t=localStorage.getItem("accessToken"),r=new a({Authorization:`Bearer ${t}`});return this.http.post(`${this.apiUrl}news/reorder`,{idOrder:e},{headers:r}).pipe(n(s=>this.renewService.handleTokenError(s,()=>this.reorderNews(e))))}static \u0275fac=function(t){return new(t||i)(p(l),p(g))};static \u0275prov=h({token:i,factory:i.\u0275fac,providedIn:"root"})};export{m as a};
