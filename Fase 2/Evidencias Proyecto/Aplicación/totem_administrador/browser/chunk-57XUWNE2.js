import{a as le}from"./chunk-NRKFFC3A.js";import{b as ce,d as de,g as pe,j as ge,m as me,n as ue,o as he,t as L}from"./chunk-DQGBAIQE.js";import{a as $,c as re,i as ae,k as X,m as Z,n as se}from"./chunk-X2DCTIRQ.js";import{$a as h,Ab as d,Bb as S,Cb as x,Eb as O,F as w,Fb as P,Gb as k,Ia as J,Ib as D,Ka as a,La as E,Mb as ee,Nb as te,Pb as ie,Y as K,Ya as b,Z as F,a as q,ab as p,ba as G,bb as y,cb as T,ga as B,ha as A,hb as s,ib as l,jb as M,kb as V,lb as H,mb as _,ob as u,pa as g,qa as m,qb as c,ra as f,rc as Y,sc as ne,vc as oe,wc as W,zb as Q}from"./chunk-INDI3DVQ.js";var z=class o{constructor(t,e){this.http=t;this.renewService=e}apiUrl=se.apiUrl;getMapById(t){let e=localStorage.getItem("accessToken"),i=this.getHeaders(e);return this.http.get(`${this.apiUrl}maps/maps/${t}`,{headers:i}).pipe(w(n=>this.renewService.handleTokenError(n,()=>this.getMapById(t))))}getInformationsCategorie(){let t=localStorage.getItem("accessToken"),e=this.getHeaders(t);return this.http.get(`${this.apiUrl}informations/informations`,{headers:e}).pipe(w(i=>this.renewService.handleTokenError(i,()=>this.getInformationsCategorie())))}uploadMapImage(t,e){let i=localStorage.getItem("accessToken"),n=new $({Authorization:`Bearer ${i}`}),r=new FormData;return r.append("map_image",e),this.http.put(`${this.apiUrl}maps/image/maps/${t}`,r,{headers:n}).pipe(w(v=>this.renewService.handleTokenError(v,()=>this.uploadMapImage(t,e))))}getAllPointIcons(){let t=localStorage.getItem("accessToken"),e=this.getHeaders(t);return this.http.get(`${this.apiUrl}maps/point-icons`,{headers:e}).pipe(w(i=>this.renewService.handleTokenError(i,()=>this.getAllPointIcons())))}getAllPointsOfInterest(){let t=localStorage.getItem("accessToken"),e=this.getHeaders(t);return this.http.get(`${this.apiUrl}maps/points`,{headers:e}).pipe(w(i=>this.renewService.handleTokenError(i,()=>this.getAllPointsOfInterest())))}createPointOfInterest(t){let e=localStorage.getItem("accessToken"),i=this.getHeaders(e);return this.http.post(`${this.apiUrl}maps/points`,t,{headers:i}).pipe(w(n=>(console.log(n),this.renewService.handleTokenError(n,()=>this.createPointOfInterest(t)))))}updatePointOfInterest(t,e){let i=localStorage.getItem("accessToken"),n=this.getHeaders(i);return this.http.put(`${this.apiUrl}maps/points/${t}`,e,{headers:n}).pipe(w(r=>(console.error(r),this.renewService.handleTokenError(r,()=>this.updatePointOfInterest(t,e)))))}deletePointOfInterest(t){let e=localStorage.getItem("accessToken"),i=this.getHeaders(e);return this.http.delete(`${this.apiUrl}maps/points/${t}`,{headers:i}).pipe(w(n=>this.renewService.handleTokenError(n,()=>this.deletePointOfInterest(t))))}getHeaders(t){return new $({Authorization:`Bearer ${t}`})}static \u0275fac=function(e){return new(e||o)(G(re),G(le))};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})};function Me(o,t){if(o&1){let e=_();s(0,"button",4),u("click",function(){let n=g(e).$implicit,r=c(2);return m(r.navigateToMap(n.id))}),d(1),l()}if(o&2){let e=t.$implicit;a(),x(" Piso ",e.floor," ")}}function Ie(o,t){if(o&1&&(s(0,"div",1)(1,"h2"),d(2),l(),s(3,"div",2),b(4,Me,2,1,"button",3),l()()),o&2){let e=t.$implicit;a(2),S(e.key),a(2),p("ngForOf",e.value)}}var R=class o{constructor(t,e){this.mapsService=t;this.router=e}buildings={Boulevard:[{floor:1,id:1},{floor:2,id:2},{floor:3,id:3}],"Sede Principal":[{floor:1,id:4},{floor:5,id:5},{floor:6,id:6},{floor:7,id:7}]};ngOnInit(){}hasPermission(t,e){let i=localStorage.getItem("userDetails");if(i){let n=JSON.parse(i).permissionsDetails;return e?n.some(r=>r.id_permission===t&&r.faq_category?.id_faq_category===e||r.id_permission===1||r.id_permission===6):n.some(r=>r.id_permission===t||r.id_permission===1||r.id_permission===6)}return!1}navigateToMap(t){this.router.navigate(["/maps/map",t])}static \u0275fac=function(e){return new(e||o)(E(z),E(X))};static \u0275cmp=B({type:o,selectors:[["app-maps-categories"]],standalone:!0,features:[D],decls:2,vars:3,consts:[["class","building-container",4,"ngFor","ngForOf"],[1,"building-container"],[1,"floor-buttons"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(e,i){e&1&&(b(0,Ie,5,2,"div",0),ee(1,"keyvalue")),e&2&&p("ngForOf",te(1,1,i.buildings))},dependencies:[L,W,Y,oe],styles:['@font-face{font-family:Merriweather;src:url(/assets/Merriweather/Merriweather-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:Merriweather;src:url(/assets/Merriweather/Merriweather-Bold.ttf) format("truetype");font-weight:700;font-style:normal}@font-face{font-family:Merriweather;src:url(/assets/Merriweather/Merriweather-Italic.ttf) format("truetype");font-weight:400;font-style:italic}@font-face{font-family:Merriweather;src:url(/assets/Merriweather/Merriweather-BoldItalic.ttf) format("truetype");font-weight:700;font-style:italic}@font-face{font-family:Merriweather;src:url(/assets/Merriweather/Merriweather-Light.ttf) format("truetype");font-weight:300;font-style:normal}@font-face{font-family:Merriweather;src:url(/assets/Merriweather/Merriweather-LightItalic.ttf) format("truetype");font-weight:300;font-style:italic}@font-face{font-family:Merriweather;src:url(/assets/Merriweather/Merriweather-Black.ttf) format("truetype");font-weight:900;font-style:normal}@font-face{font-family:Merriweather;src:url(/assets/Merriweather/Merriweather-BlackItalic.ttf) format("truetype");font-weight:900;font-style:italic}.instructions[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-size:18px;text-align:center;margin-bottom:10px;color:var(--institutional-blue)}.building-container[_ngcontent-%COMP%]{width:500px;background-color:var(--text-white);border:2px solid var(--institutional-yellow);border-radius:12px;margin:20px auto;padding:15px;box-shadow:0 4px 8px #0000001a}.building-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-size:22px;text-align:center;margin-bottom:10px;color:var(--institutional-blue)}.floor-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;gap:10px}button[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-size:16px;padding:10px 20px;background-color:var(--text-white);color:var(--dark-bg);border-radius:8px;border:var(--institutional-yellow) 2px solid;cursor:pointer;box-shadow:0 4px 6px #0000001a;transition:background-color .3s,transform .2s}button[_ngcontent-%COMP%]:hover{background-color:var(--institutional-yellow);color:var(--text-white);transform:translateY(-2px)}button[_ngcontent-%COMP%]:active{background-color:#c69500;transform:translateY(0)}button[_ngcontent-%COMP%]:focus{outline:2px solid var(--institutional-blue)}']})};function Ce(o,t){if(o&1){let e=_();s(0,"div",9)(1,"div",32)(2,"label"),d(3,"Icono seleccionado:"),l(),s(4,"div",33),u("click",function(){g(e);let n=c();return m(n.openIconModal())}),s(5,"span",34),d(6),l()()(),s(7,"div",35)(8,"label",36),d(9,"Tama\xF1o del icono:"),l(),s(10,"input",37),k("ngModelChange",function(n){g(e);let r=c();return P(r.iconSize,n)||(r.iconSize=n),m(n)}),l(),s(11,"span"),d(12),l()()()}if(o&2){let e=c();a(6),S(e.selectedIconName),a(4),O("ngModel",e.iconSize),a(2),x("",e.iconSize,"px")}}function we(o,t){if(o&1){let e=_();s(0,"div",9)(1,"label",38),d(2,"Selecciona un color:"),l(),s(3,"input",39),k("ngModelChange",function(n){g(e);let r=c();return P(r.selectedColor,n)||(r.selectedColor=n),m(n)}),l()()}if(o&2){let e=c();a(3),O("ngModel",e.selectedColor)}}function ye(o,t){if(o&1){let e=_();s(0,"div",40)(1,"label"),d(2,"Grilla:"),l(),M(3,"br"),s(4,"button",17),u("click",function(){g(e);let n=c();return m(n.toggleGrid())}),d(5,"Ver"),l(),s(6,"button",17),u("click",function(){g(e);let n=c();return m(n.toggleAlignment())}),d(7,"Alinear"),l()()}if(o&2){let e=c();a(4),T("active",e.isGridVisible),a(2),T("active",e.isAlignmentActive)}}function Oe(o,t){if(o&1&&(f(),M(0,"image",41)),o&2){let e=c();h("href",e.mapImageUrl)("width",e.imageWidth)("height",e.imageHeight)}}function Pe(o,t){if(o&1&&(f(),M(0,"line",44)),o&2){let e=t.$implicit,i=c(2);h("x1",e)("x2",e)("y2",i.imageHeight)}}function ke(o,t){if(o&1&&(f(),M(0,"line",45)),o&2){let e=t.$implicit,i=c(2);h("y1",e)("x2",i.imageWidth)("y2",e)}}function Se(o,t){if(o&1&&(f(),V(0),b(1,Pe,1,3,"line",42)(2,ke,1,3,"line",43),H()),o&2){let e=c();a(),p("ngForOf",e.gridLinesX),a(),p("ngForOf",e.gridLinesY)}}function Ee(o,t){if(o&1){let e=_();f(),V(0),s(1,"rect",46),u("click",function(n){g(e);let r=c(),v=r.$implicit,I=r.index,C=c();return m(C.onPOIClick(v,I,n))}),l(),H()}if(o&2){let e=c().$implicit;a(),y("cursor","pointer"),h("x",e.x)("y",e.y)("width",e.width)("height",e.height)}}function Te(o,t){if(o&1){let e=_();f(),V(0),s(1,"rect",47),u("click",function(n){g(e);let r=c(),v=r.$implicit,I=r.index,C=c();return m(C.onPOIClick(v,I,n))}),l(),s(2,"text",17),u("click",function(n){g(e);let r=c(),v=r.$implicit,I=r.index,C=c();return m(C.onPOIClick(v,I,n))}),d(3),l(),H()}if(o&2){let e=c().$implicit;a(),y("cursor","pointer"),h("x",e.x)("y",e.y)("width",e.width)("height",e.height)("fill",e.color||"rgba(128, 128, 128, 0.9)"),a(),y("cursor","pointer"),h("x",e.x+e.width/2)("y",e.y+e.height/2)("text-anchor","middle")("dominant-baseline","middle")("fill","black")("font-size",14),a(),x(" ",e.title," ")}}function Ve(o,t){if(o&1){let e=_();f(),V(0),s(1,"g")(2,"rect",48),u("click",function(n){g(e);let r=c(),v=r.$implicit,I=r.index,C=c();return m(C.onPOIClick(v,I,n))})("mouseenter",function(){g(e);let n=c().$implicit,r=c();return m(r.onMouseEnterPOI(n))})("mouseleave",function(){g(e);let n=c().$implicit,r=c();return m(r.onMouseLeavePOI(n))}),l(),s(3,"text",49),u("click",function(n){g(e);let r=c(),v=r.$implicit,I=r.index,C=c();return m(C.onPOIClick(v,I,n))})("mouseenter",function(){g(e);let n=c().$implicit,r=c();return m(r.onMouseEnterPOI(n))})("mouseleave",function(){g(e);let n=c().$implicit,r=c();return m(r.onMouseLeavePOI(n))}),d(4),l()(),H()}if(o&2){let e=c().$implicit;a(2),y("cursor","pointer"),h("x",e.x-e.width/2)("y",e.y-e.height/2)("width",e.width)("height",e.height)("stroke","black")("stroke-width",2)("fill",e.color||"lightgray"),a(),y("cursor","pointer"),h("x",e.x)("y",e.y-e.height*.2+e.height*.4)("font-family","Material Icons")("font-size",e.height*.8),a(),x(" ",e.iconName," ")}}function He(o,t){if(o&1&&(f(),V(0),b(1,Ee,2,6,"ng-container",25)(2,Te,4,16,"ng-container",25)(3,Ve,5,16,"ng-container",25),H()),o&2){let e=t.$implicit;a(),p("ngIf",e.categoryId==4),a(),p("ngIf",e.categoryId==3),a(),p("ngIf",e.categoryId==1)}}function We(o,t){if(o&1&&(f(),M(0,"rect",50)),o&2){let e=c();h("x",e.startX)("y",e.startY)("width",e.areaWidth)("height",e.areaHeight)("fill",e.selectedColor||"lightblue")}}function ze(o,t){if(o&1&&(f(),s(0,"g"),M(1,"rect",51),s(2,"text",52),d(3),l()()),o&2){let e=c();a(),y("pointer-events","none"),h("x",e.hoveredIcon.x-e.iconSize/2)("y",e.hoveredIcon.y-e.iconSize/2)("width",e.iconSize)("height",e.iconSize)("stroke","black")("stroke-width",2)("fill",e.selectedColor||"lightblue"),a(),y("pointer-events","none"),h("x",e.hoveredIcon.x)("y",e.hoveredIcon.y-e.iconSize*.2+e.iconSize*.4)("font-family","Material Icons")("font-size",e.iconSize*.8),a(),x(" ",e.hoveredIcon.iconName,`
`)}}function Fe(o,t){if(o&1&&(f(),s(0,"g"),M(1,"rect",53)(2,"polygon",54),s(3,"text",55),d(4),l()()),o&2){let e=c();a(),h("x",e.selectedBubbleX)("y",e.selectedBubbleY)("width",e.selectedBubbleWidth)("height",e.selectedBubbleHeight),a(),h("points",e.getBubbleTailPoints(e.selectedBubbleX+e.selectedBubbleWidth/2,e.selectedBubbleY+e.selectedBubbleHeight,e.selectedBubbleTailHeight)),a(),h("x",e.selectedBubbleX+e.selectedBubbleWidth/2)("y",e.selectedBubbleY+e.selectedBubbleHeight/2+3),a(),x(" ",e.selectedBubbleTitle," ")}}function Be(o,t){if(o&1&&(f(),s(0,"g"),M(1,"rect",53)(2,"polygon",54),s(3,"text",55),d(4),l()()),o&2){let e=c();a(),h("x",e.bubbleX)("y",e.bubbleY)("width",e.bubbleWidth)("height",e.bubbleHeight),a(),h("points",e.getBubbleTailPoints(e.bubbleX+e.bubbleWidth/2,e.bubbleY+e.bubbleHeight,e.bubbleTailHeight)),a(),h("x",e.bubbleX+e.bubbleWidth/2)("y",e.bubbleY+e.bubbleHeight/2+3),a(),x(" ",e.bubbleTitle," ")}}function Ae(o,t){if(o&1){let e=_();s(0,"div",56)(1,"div",57)(2,"span",58),u("click",function(){g(e);let n=c();return m(n.closePOIModal())}),d(3,"\xD7"),l(),s(4,"h3"),d(5),l(),s(6,"label",59),d(7,"T\xEDtulo:"),l(),s(8,"input",60),k("ngModelChange",function(n){g(e);let r=c();return P(r.poiTitle,n)||(r.poiTitle=n),m(n)}),l(),s(9,"button",61),u("click",function(){g(e);let n=c();return m(n.savePOI())}),d(10),l()()()}if(o&2){let e=c();a(5),x("",e.idEditPOI?"Editar":"Crear"," Punto de Inter\xE9s"),a(3),O("ngModel",e.poiTitle),a(2),x(" ",e.idEditPOI?"Guardar Cambios":"Crear"," ")}}function De(o,t){if(o&1&&(s(0,"option",13),d(1),l()),o&2){let e=t.$implicit;p("value",e),a(),S(e)}}function Ye(o,t){if(o&1&&(s(0,"option",13),d(1),l()),o&2){let e=t.$implicit;p("value",e.floor),a(),x(" ",e.floor," ")}}function Xe(o,t){if(o&1){let e=_();s(0,"div",62)(1,"div",63)(2,"span",64),u("click",function(){g(e);let n=c();return m(n.closeMapSelectionModal())}),d(3,"\xD7"),l(),s(4,"h3"),d(5,"Seleccionar Edificio y Piso"),l(),s(6,"label",65),d(7,"Edificio:"),l(),s(8,"select",66),k("ngModelChange",function(n){g(e);let r=c();return P(r.selectedBuilding,n)||(r.selectedBuilding=n),m(n)}),b(9,De,2,2,"option",67),l(),s(10,"label",68),d(11,"Piso:"),l(),s(12,"select",69),k("ngModelChange",function(n){g(e);let r=c();return P(r.selectedFloor,n)||(r.selectedFloor=n),m(n)}),b(13,Ye,2,2,"option",67),l(),s(14,"button",70),u("click",function(){g(e);let n=c();return m(n.saveMapSelection(n.selectedBuilding,n.selectedFloor))}),d(15," Guardar "),l()()()}if(o&2){let e=c();a(8),O("ngModel",e.selectedBuilding),a(),p("ngForOf",e.fixedMapKeys),a(3),O("ngModel",e.selectedFloor),a(),p("ngForOf",e.getFloorsForBuilding(e.selectedBuilding)),a(),p("disabled",!e.selectedBuilding||e.selectedFloor===null)}}function Le(o,t){if(o&1){let e=_();s(0,"div",77),u("click",function(){let n=g(e).$implicit,r=c(2);return m(r.selectIcon(n.id_point_icon))}),s(1,"div",78)(2,"span",79),d(3),l()(),s(4,"div",80),d(5),l()()}if(o&2){let e=t.$implicit;a(3),S(e.point_icon_image_path),a(2),S(e.point_icon_name)}}function Ne(o,t){if(o&1){let e=_();s(0,"div",71)(1,"div",72)(2,"span",64),u("click",function(){g(e);let n=c();return m(n.closeIconModal())}),d(3,"\xD7"),l(),s(4,"h3"),d(5,"Seleccionar un Icono"),l(),s(6,"div",73)(7,"input",74),k("ngModelChange",function(n){g(e);let r=c();return P(r.iconSearchTerm,n)||(r.iconSearchTerm=n),m(n)}),l()(),s(8,"div",75),b(9,Le,6,2,"div",76),l()()()}if(o&2){let e=c();a(7),O("ngModel",e.iconSearchTerm),a(2),p("ngForOf",e.filteredIcons)}}function Re(o,t){if(o&1&&(s(0,"div"),M(1,"img",90),l()),o&2){let e=c(2);a(),p("src",e.previewUrl,J)}}function je(o,t){o&1&&(s(0,"p",91),d(1,"No hay imagen seleccionada."),l())}function Ue(o,t){if(o&1){let e=_();s(0,"div",81)(1,"div",82)(2,"span",64),u("click",function(){g(e);let n=c();return m(n.closeUploadModal())}),d(3,"\xD7"),l(),s(4,"h3"),d(5,"Cargar Imagen del Mapa"),l(),s(6,"div",83)(7,"label",84)(8,"input",85),u("change",function(n){g(e);let r=c();return m(r.onFileSelected(n))}),l(),d(9," Seleccionar archivo "),l(),s(10,"span",86),d(11),l()(),s(12,"div",87),b(13,Re,2,1,"div",88)(14,je,2,0,"ng-template",null,0,ie),l(),s(16,"button",89),u("click",function(){g(e);let n=c();return m(n.uploadImage())}),d(17," Subir Imagen "),l()()()}if(o&2){let e=Q(15),i=c();a(11),S(i.selectedFileName||"Ning\xFAn archivo seleccionado"),a(2),p("ngIf",i.previewUrl)("ngIfElse",e),a(3),p("disabled",!i.selectedFile)}}var j=class o{constructor(t,e,i){this.route=t;this.mapsService=e;this.router=i}id=null;mapImageUrl="";materialIcons=[];informations=[];ngOnInit(){this.loadData()}loadData(){this.id=null,this.mapImageUrl="",this.loadMapData(),this.materialIcons.length===0&&this.loadMaterialIcons(),this.informations.length===0&&this.loadCategories(),this.loadPointsOfInterest()}loadMapData(){this.id=Number(this.route.snapshot.paramMap.get("id_map")),this.id!==null&&this.mapsService.getMapById(this.id).subscribe({next:t=>{this.mapImageUrl=`https://totemvespucio.cl/assets/mapas/${t.map.image_path}`,this.loadMapImage()},error:t=>{console.error("Error al obtener el mapa:",t)}})}loadPointsOfInterest(){this.mapsService.getAllPointsOfInterest().subscribe({next:t=>{t.success?(console.log("Puntos de inter\xE9s cargados:",t.points),this.pois=t.points.filter(e=>e.id_map===this.id).map(e=>({id:e.id_point_of_interest,categoryId:e.categoryId,x:e.coordinates.coordinates[0],y:e.coordinates.coordinates[1],title:e.point_name,relatedId:e.id_map_conexion||e.id_info||null,iconName:e.categoryId===1?e.PointIcon.point_icon_image_path:null,iconId:e.id_point_icon,width:e.width,height:e.height,color:e.color,mapId:e.id_map,originalWidth:e.width,originalHeight:e.height,isEnlarged:!1})).sort((e,i)=>i.categoryId-e.categoryId)):console.error("Error al cargar puntos de inter\xE9s:",t.message)},error:t=>{console.error("Error al obtener puntos de inter\xE9s:",t)}})}loadMaterialIcons(){this.mapsService.getAllPointIcons().subscribe({next:t=>{this.materialIcons=t.icons},error:t=>{console.error("Error al obtener los tipos de puntos:",t)}})}loadCategories(){this.mapsService.getInformationsCategorie().subscribe(t=>{this.informations=t.informations},t=>{console.error("Error al obtener las categor\xEDas:",t)})}imageWidth=0;imageHeight=0;svgWidth=1024;svgHeight=1024;isGridVisible=!0;gridSpacing=5;gridLinesX=[];gridLinesY=[];loadMapImage(){let t=new Image;t.src=this.mapImageUrl,t.onload=()=>{this.adjustImageDimensions(t),this.updateSvgSize(),this.generateGridLines()}}adjustImageDimensions(t){let i=t.naturalWidth/t.naturalHeight;t.naturalWidth>t.naturalHeight?(this.imageWidth=Math.min(t.naturalWidth,1e3),this.imageHeight=this.imageWidth/i):(this.imageHeight=Math.min(t.naturalHeight,1e3),this.imageWidth=this.imageHeight*i),this.calculateGridSpacing(),this.alignImageDimensionsToGrid()}calculateGridSpacing(){let t=Math.min(this.svgWidth,this.svgHeight)<1e3?Math.round(Math.min(this.svgWidth,this.svgHeight)/1e3*10):10;this.gridSpacing=t/2}alignImageDimensionsToGrid(){this.imageHeight%this.gridSpacing!==0&&(this.imageHeight=Math.floor(this.imageHeight/this.gridSpacing)*this.gridSpacing),this.imageWidth%this.gridSpacing!==0&&(this.imageWidth=Math.floor(this.imageWidth/this.gridSpacing)*this.gridSpacing)}updateSvgSize(){this.svgWidth=this.imageWidth,this.svgHeight=this.imageHeight}generateGridLines(){this.gridLinesX=this.generateGridLinesArray(this.svgWidth),this.gridLinesY=this.generateGridLinesArray(this.svgHeight)}generateGridLinesArray(t){let e=[];for(let i=0;i<=t;i+=this.gridSpacing)e.push(i);return e}toggleGrid(){this.isGridVisible=!this.isGridVisible}isCreatingPOI=!1;isEditMode=!1;isDeleteMode=!1;isClickPanning=!1;idEditPOI=null;selectedPOIId=null;isAlargedPOI=!1;isAlignmentActive=!0;isDrawingArea=!1;isPanning=!1;isMouseOver=!1;bubbleTitle=null;bubbleX=0;bubbleY=0;bubbleWidth=0;bubbleHeight=30;bubbleTailHeight=10;selectedBubbleTitle=null;selectedBubbleX=0;selectedBubbleY=0;selectedBubbleWidth=0;selectedBubbleHeight=30;selectedBubbleTailHeight=10;selectedFile=null;previewUrl=null;isUploadModalOpen=!1;activatePOICreation(){let t=this.isCreatingPOI;this.deactivateAllModes(),this.isCreatingPOI=!t}activateEditMode(){let t=this.isEditMode;this.deactivateAllModes(),this.isEditMode=!t}activateDeleteMode(){let t=this.isDeleteMode;this.deactivateAllModes(),this.isDeleteMode=!t}togglePanning(){let t=this.isClickPanning;this.deactivateAllModes(),this.isClickPanning=!t}deactivateAllModes(){this.isCreatingPOI=!1,this.isEditMode=!1,this.isDeleteMode=!1,this.isClickPanning=!1}toggleAlignment(){this.isAlignmentActive=!this.isAlignmentActive}alignCoordinate(t){return this.isAlignmentActive?this.roundToGrid(t)+2:t}roundToGrid(t){return Math.round(t/this.gridSpacing)*this.gridSpacing-2}onMouseDown(t){t.button===1?this.startPanning(t):t.button===0&&(this.isClickPanning?this.startPanning(t):this.isCreatingPOI?this.handlePOICreation(t):this.resetPOIVisuals())}onMouseMove(t){if(this.isPanning&&this.performPanning(t),this.selectedCategoryId==1&&this.isCreatingPOI){let{adjustedX:e,adjustedY:i}=this.getAdjustedCoordinates(t);this.hoveredIcon={x:e,y:i,iconName:this.selectedIconName}}(this.selectedCategoryId==3||this.selectedCategoryId==4)&&this.isCreatingPOI&&this.updateAreaDrawing(t)}onMouseLeave(t){this.isMouseOver=!1,this.isCreatingPOI&&this.selectedCategoryId==1&&(this.hoveredIcon=null)}onMouseEnter(t){this.isMouseOver=!0}onMouseUp(t){this.isPanning&&(this.isPanning=!1)}onMouseEnterPOI(t){if(t.categoryId===1&&!t.isEnlarged){this.bubbleTitle=t.title;let e=t.title.length;this.bubbleWidth=Math.max(60,e*9),this.bubbleHeight=30,this.bubbleX=t.x-this.bubbleWidth/2,this.bubbleY=t.y-t.height*1.2/2-this.bubbleHeight-this.bubbleTailHeight,t.width=t.originalWidth*1.2,t.height=t.originalHeight*1.2,t.isEnlarged=!0}}onMouseLeavePOI(t){t.categoryId===1&&t.isEnlarged&&t.id!==this.selectedPOIId&&(this.bubbleTitle=null,t.width=t.originalWidth,t.height=t.originalHeight,t.isEnlarged=!1)}getBubbleTailPoints(t,e,i){return`
      ${t-10/2},${e}  
      ${t+10/2},${e}  
      ${t},${e+i}    
    `}onRightClick(t){t.preventDefault(),this.isCreatingPOI&&(this.tempPOI=null,this.isDrawingArea=!1)}openUploadModal(){this.isUploadModalOpen=!0}closeUploadModal(){this.isUploadModalOpen=!1,this.selectedFileName="",this.selectedFile=null,this.previewUrl=null}onFileSelected(t){let e=t.target.files[0];if(e){this.selectedFile=e,this.selectedFileName=e.name;let i=new FileReader;i.onload=n=>this.previewUrl=n.target.result,i.readAsDataURL(e)}else this.selectedFileName="",this.previewUrl=null}selectedFileName="";uploadImage(){this.selectedFile&&this.id&&this.mapsService.uploadMapImage(this.id,this.selectedFile).subscribe(t=>{this.closeUploadModal(),this.loadData()},t=>{console.error("Error al subir la imagen:",t)})}panOffsetX=0;panOffsetY=0;panNowX=0;panNowY=0;zoomLevel=100;exZoomLevel=100;startPanning(t){this.isPanning=!0,this.panNowX=t.clientX,this.panNowY=t.clientY,t.preventDefault()}performPanning(t){let e=t.clientX-this.panNowX,i=t.clientY-this.panNowY;this.panNowX=t.clientX,this.panNowY=t.clientY,this.panOffsetX+=e,this.panOffsetY+=i,this.constrainPanOffsets()}constrainPanOffsets(){let t=-this.svgWidth*(this.zoomLevel/100)+this.svgWidth,e=-this.svgHeight*(this.zoomLevel/100)+this.svgHeight;this.panOffsetX=Math.min(0,Math.max(this.panOffsetX,t)),this.panOffsetY=Math.min(0,Math.max(this.panOffsetY,e))}onZoomChange(t){let e=t.target,i=Number(e.value);this.applyZoomChange(i)}onWheel(t){t.preventDefault();let e=t.deltaY>0?-10:10,i=Math.min(Math.max(this.zoomLevel+e,100),500);this.zoomLevel=i,this.applyZoomChange(i)}applyZoomChange(t){let e=t/this.exZoomLevel||1;this.exZoomLevel=t;let i=(this.svgWidth/2-this.panOffsetX)*e,n=(this.svgHeight/2-this.panOffsetY)*e;this.panOffsetX=this.svgWidth/2-i,this.panOffsetY=this.svgHeight/2-n,this.constrainPanOffsets()}getAdjustedCoordinates(t){let e=(t.offsetX-this.panOffsetX)/(this.zoomLevel/100),i=(t.offsetY-this.panOffsetY)/(this.zoomLevel/100);return{adjustedX:e,adjustedY:i}}pois=[];selectedCategoryId=1;tempPOI=null;isPOIModalOpen=!1;poiTitle="";poiRelatedId=null;selectedIconName="security";selectedIconId=102;selectedColor="#FFFFFF";areaHeight=2;areaWidth=2;startX=0;startY=0;initialX=0;initialY=0;handlePOICreation(t){let{adjustedX:e,adjustedY:i}=this.getAdjustedCoordinates(t);switch(+this.selectedCategoryId){case 1:this.createCategory1POI(e,i),this.hoveredIcon=null;break;case 3:this.createCategory3Area(e,i);break;case 4:this.createCategory4Connection(e,i);break}}updateAreaDrawing(t){let{adjustedX:e,adjustedY:i}=this.getAdjustedCoordinates(t),n=this.alignCoordinate(e),r=this.alignCoordinate(i);this.isDrawingArea?(this.startX=Math.min(n,this.initialX)-1,this.startY=Math.min(r,this.initialY)-1,this.areaWidth=Math.abs(n-this.initialX)+2,this.areaHeight=Math.abs(r-this.initialY)+2):(this.startX=n-1,this.startY=r-1,this.areaWidth=2,this.areaHeight=2)}savePOI(){if(this.tempPOI){this.tempPOI.title=this.poiTitle,this.tempPOI.relatedId=this.tempPOI.categoryId===1?this.selectedInformationCategoryId:this.tempPOI.relatedId,this.tempPOI.iconId=this.selectedIconId||0,this.tempPOI.color=this.selectedColor,this.tempPOI.iconName=this.selectedIconName;let t={id:this.tempPOI.id,point_name:this.tempPOI.title,coordinates:{type:"Point",coordinates:[this.tempPOI.x,this.tempPOI.y]},categoryId:this.tempPOI.categoryId,id_point_icon:this.tempPOI.iconId,id_map:this.tempPOI.mapId,id_map_conexion:this.tempPOI.categoryId===4?this.tempPOI.relatedId:null,id_info:this.tempPOI.categoryId===1?this.tempPOI.relatedId:null,width:this.tempPOI.width,height:this.tempPOI.height,color:this.tempPOI.color};this.idEditPOI?this.updatePOI(t):(console.log("Datos del POI:",t),this.mapsService.createPointOfInterest(t).subscribe({next:e=>{console.log("POI creado:",e),this.loadPointsOfInterest(),this.closePOIModal()},error:e=>{console.error("Error al crear el POI:",e)}}))}}updatePOI(t){let e={point_name:t.point_name,id_info:t.id_info==="null"?null:t.id_info,id_map_conexion:t.categoryId===4?t.id_map_conexion:null};console.log("Datos de actualizaci\xF3n:",e,t.id),this.mapsService.updatePointOfInterest(t.id,e).subscribe({next:i=>{console.log("POI actualizado:",i),this.loadPointsOfInterest(),this.closePOIModal()},error:i=>{console.error("Error al actualizar el POI:",i)}})}closePOIModal(){this.isPOIModalOpen=!1,this.poiTitle="",this.poiRelatedId=null,this.isDrawingArea=!1}onPOIClick(t,e,i){if(i.stopPropagation(),this.isEditMode)this.poiTitle=t.title,this.poiRelatedId=t.relatedId,this.selectedIconName=t.iconName,this.tempPOI=q({},t),this.idEditPOI=t.id,this.selectedInformationCategoryId=t.relatedId||null,this.isPOIModalOpen=!0;else if(this.isDeleteMode)this.deletePOI(t.id,e);else if(t.categoryId===1)if(t.isEnlarged)this.resetPOIVisuals();else{this.resetPOIVisuals(),this.selectedBubbleTitle=t.title;let n=t.title.length;this.selectedBubbleWidth=Math.max(60,n*9),this.selectedBubbleHeight=30,this.selectedBubbleX=t.x-this.selectedBubbleWidth/2,this.selectedBubbleY=t.y-t.height*1.2/2-this.selectedBubbleHeight-this.selectedBubbleTailHeight,t.width=t.originalWidth*1.2,t.height=t.originalHeight*1.2,t.isEnlarged=!0,this.selectedPOIId=t.id}}deletePOI(t,e){confirm("\xBFEst\xE1s seguro de que deseas eliminar este punto de inter\xE9s?")&&this.mapsService.deletePointOfInterest(t).subscribe({next:i=>{console.log("POI eliminado:",i),this.pois.splice(e,1),this.idEditPOI=null,this.resetPOIVisuals(),this.loadPointsOfInterest()},error:i=>{console.error("Error al eliminar el POI:",i)}})}resetPOIVisuals(){this.pois.forEach(t=>{t.isEnlarged&&(t.width=t.originalWidth,t.height=t.originalHeight,t.isEnlarged=!1)}),this.selectedPOIId=null,this.selectedBubbleTitle=null,this.bubbleTitle=null}isIconModalOpen=!1;iconSearchTerm="";iconSize=24;hoveredIcon=null;selectedInformationCategoryId=null;get filteredIcons(){return this.materialIcons.filter(t=>t.point_icon_name.toLowerCase().includes(this.iconSearchTerm.toLowerCase())||t.point_icon_image_path.toLowerCase().includes(this.iconSearchTerm.toLowerCase()))}openIconModal(){this.isIconModalOpen=!0}closeIconModal(){this.isIconModalOpen=!1}selectIcon(t){let e=this.materialIcons.find(i=>i.id_point_icon===t)?.point_icon_image_path||"";this.selectedIconId=t,this.selectedIconName=e,this.closeIconModal()}createCategory1POI(t,e){this.tempPOI={id:0,categoryId:1,x:this.alignCoordinate(t),y:this.alignCoordinate(e),title:"",iconName:this.selectedIconName,iconId:this.selectedIconId||0,color:this.selectedColor,relatedId:this.selectedInformationCategoryId,width:this.iconSize,height:this.iconSize,originalWidth:this.iconSize,originalHeight:this.iconSize,mapId:this.id||0,isEnlarged:!1},this.selectedInformationCategoryId=null,this.isPOIModalOpen=!0}createCategory3Area(t,e){if(!this.isDrawingArea)this.initialX=this.startX=this.alignCoordinate(t),this.initialY=this.startY=this.alignCoordinate(e),this.startX=this.startX-1,this.startY=this.startY-1,this.areaHeight=2,this.areaWidth=2,this.isDrawingArea=!0;else{let i=this.alignCoordinate(t),n=this.alignCoordinate(e);this.startX=Math.min(i,this.initialX),this.startY=Math.min(n,this.initialY),this.areaWidth=Math.abs(i-this.initialX),this.areaHeight=Math.abs(n-this.initialY),this.tempPOI={id:0,categoryId:3,x:this.startX,y:this.startY,width:this.areaWidth,height:this.areaHeight,originalWidth:this.areaWidth,originalHeight:this.areaHeight,isEnlarged:!1,color:this.selectedColor,title:"",relatedId:null,mapId:this.id||0,iconName:"",iconId:0},this.isDrawingArea=!1,this.selectedInformationCategoryId=null,this.isPOIModalOpen=!0}}isMapSelectionModalOpen=!1;selectedBuilding="";selectedFloor=1;createCategory4Connection(t,e){if(!this.isDrawingArea)this.initialX=this.startX=this.alignCoordinate(t),this.initialY=this.startY=this.alignCoordinate(e),this.startX=this.startX-1,this.startY=this.startY-1,this.areaHeight=2,this.areaWidth=2,this.selectedColor="rgba(128, 128, 128, 0.9)",this.isDrawingArea=!0;else{let i=this.alignCoordinate(t),n=this.alignCoordinate(e);this.startX=Math.min(i,this.initialX),this.startY=Math.min(n,this.initialY),this.areaWidth=Math.abs(i-this.initialX),this.areaHeight=Math.abs(n-this.initialY),this.tempPOI={id:0,categoryId:4,x:this.startX,y:this.startY,width:this.areaWidth,height:this.areaHeight,isEnlarged:!1,originalWidth:this.areaWidth,originalHeight:this.areaHeight,color:this.selectedColor,title:"",relatedId:null,mapId:this.id||0,iconName:"",iconId:0},this.isDrawingArea=!1,this.openMapSelectionModal()}}openMapSelectionModal(){this.isMapSelectionModalOpen=!0}fixedMapData={Boulevard:[{floor:1,id_map:1},{floor:2,id_map:2},{floor:3,id_map:3}],"Sede Principal":[{floor:1,id_map:4},{floor:5,id_map:5},{floor:6,id_map:6},{floor:7,id_map:7}]};fixedMapKeys=Object.keys(this.fixedMapData);getFloorsForBuilding(t){return this.fixedMapData[t]||[]}saveMapSelection(t,e){let i=this.fixedMapData[t]?.find(n=>n.floor==e);i&&this.tempPOI?(this.tempPOI.relatedId=i.id_map,console.log("Map seleccionado, ID:",i.id_map),this.isMapSelectionModalOpen=!1,this.savePOI()):console.warn("Mapa no encontrado para la combinaci\xF3n de edificio y piso seleccionada.")}closeMapSelectionModal(){this.isMapSelectionModalOpen=!1,this.tempPOI=null}navigateToMap(t){this.router.navigate(["/maps/map/",t]).then(()=>{this.loadData()})}navigateToMaps(){this.router.navigate(["/maps"])}static \u0275fac=function(e){return new(e||o)(E(ae),E(z),E(X))};static \u0275cmp=B({type:o,selectors:[["app-maps-index"]],standalone:!0,features:[D],decls:53,vars:33,consts:[["noPreview",""],[1,"map-container"],[1,"navigation-bar"],[1,"back-button",3,"click"],[1,"spacer"],[1,"upload-section"],["for","upload-button",1,"upload-label"],["id","upload-button",3,"click"],[1,"controls-container"],[1,"section-container"],["for","category-select"],["id","category-select",3,"ngModelChange","ngModel"],["selected","",3,"value"],[3,"value"],["class","section-container",4,"ngIf"],["class","section-container action-buttons grilla",4,"ngIf"],[1,"section-container","action-buttons"],[3,"click"],[1,"section-container","zoom-container"],["for","zoom-range"],["id","zoom-range","type","range","min","100","max","500",3,"ngModelChange","input","ngModel"],[1,"svg-container"],[3,"mousedown","mouseup","mousemove","contextmenu","mouseleave","mouseenter","wheel"],[2,"transform-origin","top left"],["x","0","y","0","preserveAspectRatio","none","style","pointer-events: none;",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["stroke","blue","stroke-width","1",4,"ngIf"],["class","modal-poi",4,"ngIf"],["class","modal map-selection-modal",4,"ngIf"],["class","modal-icon",4,"ngIf"],["class","modal upload-map-modal",4,"ngIf"],[1,"icon-selector"],[1,"selected-icon",3,"click"],[1,"material-icon"],[1,"slider-container"],["for","size-slider"],["id","size-slider","type","range","min","16","max","160","step","1",3,"ngModelChange","ngModel"],["for","color-picker"],["id","color-picker","type","color",3,"ngModelChange","ngModel"],[1,"section-container","action-buttons","grilla"],["x","0","y","0","preserveAspectRatio","none",2,"pointer-events","none"],["y1","0","stroke","#ddd","stroke-width","0.5",4,"ngFor","ngForOf"],["x1","0","stroke","#ddd","stroke-width","0.5",4,"ngFor","ngForOf"],["y1","0","stroke","#ddd","stroke-width","0.5"],["x1","0","stroke","#ddd","stroke-width","0.5"],["fill","rgba(128, 128, 128, 0.9)","stroke","black","stroke-width","1",3,"click"],["stroke","black","stroke-width","1",3,"click"],["rx","50%",3,"click","mouseenter","mouseleave"],["text-anchor","middle","dominant-baseline","middle",3,"click","mouseenter","mouseleave"],["stroke","blue","stroke-width","1"],["rx","50%"],["text-anchor","middle","dominant-baseline","middle"],["rx","10","ry","10","fill","white","stroke","black","stroke-width","1"],["fill","white","stroke","black","stroke-width","1"],["text-anchor","middle","dominant-baseline","middle","font-size","14","fill","black"],[1,"modal-poi"],[1,"modal-content-poi"],[1,"close-poi",3,"click"],["for","poi-title",1,"poi-label"],["id","poi-title","type","text",1,"poi-input",3,"ngModelChange","ngModel"],[1,"poi-button",3,"click"],[1,"modal","map-selection-modal"],[1,"modal-content","map-selection-content"],[1,"close",3,"click"],["for","building-select"],["id","building-select",1,"map-selection-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","floor-select"],["id","floor-select",1,"map-selection-select",3,"ngModelChange","ngModel"],[1,"map-selection-button",3,"click","disabled"],[1,"modal-icon"],[1,"modal-content-icon"],[1,"icon-search"],["type","text","placeholder","Buscar icono...",3,"ngModelChange","ngModel"],[1,"icon-list"],["class","icon-card",3,"click",4,"ngFor","ngForOf"],[1,"icon-card",3,"click"],[1,"icon-display"],[1,"material-icons"],[1,"icon-name"],[1,"modal","upload-map-modal"],[1,"modal-content","upload-modal-content"],[1,"custom-file-input-container"],[1,"custom-file-input"],["type","file",3,"change"],[1,"file-name"],[1,"preview-container"],[4,"ngIf","ngIfElse"],[1,"upload-button",3,"click","disabled"],["alt","Preview",1,"preview-image",3,"src"],[1,"no-preview-text"]],template:function(e,i){e&1&&(s(0,"div",1)(1,"div",2)(2,"button",3),u("click",function(){return i.navigateToMaps()}),d(3," Volver Atr\xE1s "),l(),M(4,"div",4),s(5,"div",5)(6,"label",6),d(7,"Cambiar Imagen del Mapa:"),l(),s(8,"button",7),u("click",function(){return i.openUploadModal()}),d(9,"Subir Imagen"),l()()(),s(10,"div",8)(11,"div",9)(12,"label",10),d(13,"Selecciona la categor\xEDa:"),l(),s(14,"select",11),k("ngModelChange",function(r){return P(i.selectedCategoryId,r)||(i.selectedCategoryId=r),r}),s(15,"option",12),d(16,"Punto de Inter\xE9s"),l(),s(17,"option",13),d(18,"Salas o \xC1reas"),l(),s(19,"option",13),d(20,"Escaleras o Conexiones"),l()()(),b(21,Ce,13,3,"div",14)(22,we,4,1,"div",14)(23,ye,8,4,"div",15),s(24,"div",16)(25,"button",17),u("click",function(){return i.activatePOICreation()}),d(26,"Crear Punto"),l(),s(27,"button",17),u("click",function(){return i.activateEditMode()}),d(28,"Editar"),l(),s(29,"button",17),u("click",function(){return i.activateDeleteMode()}),d(30,"Eliminar"),l(),s(31,"button",17),u("click",function(){return i.togglePanning()}),d(32,"Modo Manita"),l()(),s(33,"div",18)(34,"label",19),d(35,"Zoom:"),l(),s(36,"input",20),k("ngModelChange",function(r){return P(i.zoomLevel,r)||(i.zoomLevel=r),r}),u("input",function(r){return i.onZoomChange(r)}),l(),s(37,"span"),d(38),l()()(),s(39,"div",21),f(),s(40,"svg",22),u("mousedown",function(r){return i.onMouseDown(r)})("mouseup",function(r){return i.onMouseUp(r)})("mousemove",function(r){return i.onMouseMove(r)})("contextmenu",function(r){return i.onRightClick(r)})("mouseleave",function(r){return i.onMouseLeave(r)})("mouseenter",function(r){return i.onMouseEnter(r)})("wheel",function(r){return i.onWheel(r)}),s(41,"g",23),b(42,Oe,1,3,"image",24)(43,Se,3,2,"ng-container",25)(44,He,4,3,"ng-container",26)(45,We,1,5,"rect",27)(46,ze,4,16,"g",25)(47,Fe,5,8,"g",25)(48,Be,5,8,"g",25),l()()()(),b(49,Ae,11,3,"div",28)(50,Xe,16,5,"div",29)(51,Ne,10,2,"div",30)(52,Ue,18,4,"div",31)),e&2&&(a(14),O("ngModel",i.selectedCategoryId),a(),p("value",1),a(2),p("value",3),a(2),p("value",4),a(2),p("ngIf",i.selectedCategoryId==1),a(),p("ngIf",i.selectedCategoryId==1||i.selectedCategoryId==3),a(),p("ngIf",i.selectedCategoryId!=1),a(2),T("active",i.isCreatingPOI),a(2),T("active",i.isEditMode),a(2),T("active",i.isDeleteMode),a(2),T("active",i.isClickPanning),a(5),O("ngModel",i.zoomLevel),a(2),x("",i.zoomLevel,"%"),a(2),y("cursor",i.isPanning?"grab":"default"),h("width",i.svgWidth)("height",i.svgHeight),a(),h("transform","translate("+i.panOffsetX+","+i.panOffsetY+") scale("+i.zoomLevel/100+")"),a(),p("ngIf",i.mapImageUrl!==""),a(),p("ngIf",i.isGridVisible&&i.selectedCategoryId!=1),a(),p("ngForOf",i.pois),a(),p("ngIf",(i.selectedCategoryId==3||i.selectedCategoryId==4)&&i.isCreatingPOI),a(),p("ngIf",i.hoveredIcon),a(),p("ngIf",i.selectedBubbleTitle),a(),p("ngIf",i.bubbleTitle),a(),p("ngIf",i.isPOIModalOpen),a(),p("ngIf",i.isMapSelectionModalOpen),a(),p("ngIf",i.isIconModalOpen),a(),p("ngIf",i.isUploadModalOpen))},dependencies:[L,ue,he,ce,ge,me,de,pe,W,Y,ne],styles:['@font-face{font-family:Merriweather;src:url(/assets/Merriweather/Merriweather-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:Merriweather;src:url(/assets/Merriweather/Merriweather-Bold.ttf) format("truetype");font-weight:700;font-style:normal}@font-face{font-family:Merriweather;src:url(/assets/Merriweather/Merriweather-Italic.ttf) format("truetype");font-weight:400;font-style:italic}@font-face{font-family:Merriweather;src:url(/assets/Merriweather/Merriweather-BoldItalic.ttf) format("truetype");font-weight:700;font-style:italic}@font-face{font-family:Merriweather;src:url(/assets/Merriweather/Merriweather-Light.ttf) format("truetype");font-weight:300;font-style:normal}@font-face{font-family:Merriweather;src:url(/assets/Merriweather/Merriweather-LightItalic.ttf) format("truetype");font-weight:300;font-style:italic}@font-face{font-family:Merriweather;src:url(/assets/Merriweather/Merriweather-Black.ttf) format("truetype");font-weight:900;font-style:normal}@font-face{font-family:Merriweather;src:url(/assets/Merriweather/Merriweather-BlackItalic.ttf) format("truetype");font-weight:900;font-style:italic}.map-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh}.controls[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;padding:10px;background-color:#f5f5f5}.controls[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-right:20px;width:250px}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px;margin-bottom:10px}.zoom-control[_ngcontent-%COMP%]{margin-left:auto;display:flex;align-items:center}.zoom-control[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{margin-left:10px}.svg-container[_ngcontent-%COMP%]{flex:1;overflow:auto;position:relative;z-index:1}.svg-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;margin:0 auto;z-index:2;background-color:#fff;border:var(--institutional-yellow) 2px solid}button.active[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}.color-box[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;margin-right:8px;vertical-align:middle}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:4px;position:relative}.close[_ngcontent-%COMP%]{position:absolute;top:10px;right:20px;font-size:30px;cursor:pointer}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;width:50%;max-width:500px;box-shadow:0 4px 8px #0003}.close[_ngcontent-%COMP%]{position:absolute;top:10px;right:20px;font-size:24px;cursor:pointer}.icon-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:10px;margin-top:20px;max-height:300px;overflow-y:auto}.poi-title[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn .3s forwards;transition:opacity .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#00000080}.modal-content[_ngcontent-%COMP%]{background-color:#fefefe;padding:20px;border:1px solid #888;width:50%;border-radius:10px;position:relative}.close[_ngcontent-%COMP%]{position:absolute;top:10px;right:20px;color:#aaa;font-size:28px;font-weight:700;cursor:pointer}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:10px 20px;border:none;margin-top:10px;border-radius:5px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.icon-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px;cursor:pointer;border:1px solid #ddd;border-radius:4px;transition:background-color .2s ease}.icon-item[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.icon-selector[_ngcontent-%COMP%]{margin-bottom:10px}.selected-icon[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.selected-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{margin-right:10px}.controls-container[_ngcontent-%COMP%]{font-family:Merriweather,serif;width:90%;margin:20px auto;border:2px solid var(--institutional-blue);border-radius:15px;padding:20px;background-color:var(--light-beige);display:grid;gap:20px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.section-container[_ngcontent-%COMP%]{padding:10px;border:1px solid black;border-radius:10px;background-color:#fff;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:10px}button[_ngcontent-%COMP%]{background-color:#fff;border:2px solid var(--institutional-yellow);color:#000;padding:10px 15px;border-radius:15%;cursor:pointer;font-family:Merriweather,serif;font-weight:400;transition:background-color .3s,color .3s;flex:1 1 calc(30% - 10px)}button[_ngcontent-%COMP%]:hover, button.active[_ngcontent-%COMP%]{background-color:var(--institutional-yellow);color:var(--text-white)}.icon-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%}.icon-selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.material-icon[_ngcontent-%COMP%]{font-family:Material Icons;font-size:24px}.selected-icon[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer}.zoom-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}input[type=range][_ngcontent-%COMP%], .slider-container[_ngcontent-%COMP%]{width:100%}#category-select[_ngcontent-%COMP%]{width:100%;padding:8px;border:2px solid var(--institutional-yellow);border-radius:10px 10px 0 0;font-family:Merriweather,serif;background-color:#fff;color:var(--institutional-blue);font-size:16px}button.select-icon[_ngcontent-%COMP%]{width:100%;background-color:#fff;border:2px solid var(--institutional-yellow);color:#000;padding:10px;border-radius:15%;cursor:pointer;font-family:Merriweather,serif;transition:background-color .3s,color .3s}button.select-icon[_ngcontent-%COMP%]:hover{background-color:var(--institutional-yellow);color:#fff}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:40%;min-height:40%;height:40%;background-color:#fff;border:2px solid var(--institutional-yellow);color:#000;border-radius:15%;font-family:Merriweather,serif;font-size:12px;font-weight:400;cursor:pointer;transition:background-color .3s,color .3s}.grilla[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:100%}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .action-buttons[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:var(--institutional-yellow);color:var(--text-white)}#color-picker[_ngcontent-%COMP%]{display:block;margin:0 auto;width:120px;height:120px;border:2px solid var(--institutional-yellow);cursor:pointer}input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:8px;border-radius:5px;background:var(--light-beige);outline:none;opacity:.9;transition:opacity .2s}input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;background:var(--institutional-blue);border:2px solid var(--institutional-yellow);border-radius:50%;cursor:pointer}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{width:20px;height:20px;background:var(--institutional-blue);border:2px solid var(--institutional-yellow);border-radius:50%;cursor:pointer}.icon-selector[_ngcontent-%COMP%]{text-align:center}.selected-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;padding:10px;border:2px solid var(--institutional-yellow);border-radius:10px;background-color:var(--light-beige);cursor:pointer;font-family:Merriweather,serif}.selected-icon[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--institutional-blue)}button[_ngcontent-%COMP%]{width:100%}.navigation-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:98%;margin:10px;max-height:60px;padding:10px;background-color:var(--light-beige);border:2px solid var(--institutional-yellow);border-radius:8px;font-family:Merriweather,serif}.back-button[_ngcontent-%COMP%]{background-color:var(--text-white);border:2px solid var(--institutional-yellow);border-radius:15%;color:var(--institutional-blue);padding:8px 12px;font-size:16px;cursor:pointer;transition:background-color .3s,color .3s;max-width:150px;margin:0}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--institutional-yellow);color:var(--text-white)}.spacer[_ngcontent-%COMP%]{flex-grow:1}.upload-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.upload-label[_ngcontent-%COMP%]{font-size:16px;color:var(--institutional-blue)}#upload-button[_ngcontent-%COMP%]{background-color:var(--text-white);border:2px solid var(--institutional-yellow);border-radius:15%;color:var(--institutional-blue);padding:8px 12px;font-size:16px;cursor:pointer;transition:background-color .3s,color .3s;margin:0}#upload-button[_ngcontent-%COMP%]:hover{background-color:var(--institutional-yellow);color:var(--text-white)}.modal.upload-map-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content.upload-modal-content[_ngcontent-%COMP%]{background-color:var(--text-white);border:3px solid var(--institutional-yellow);border-radius:15px;padding:20px;width:500px;max-width:90%;font-family:Merriweather,serif;box-shadow:0 4px 8px #0003}.close[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--institutional-blue);float:right;cursor:pointer}.close[_ngcontent-%COMP%]:hover{color:var(--institutional-yellow)}.custom-file-input-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-top:15px;margin-bottom:15px}.custom-file-input[_ngcontent-%COMP%]{position:relative;display:inline-block;background-color:var(--text-white);border:2px solid var(--institutional-yellow);border-radius:10px;color:var(--institutional-blue);padding:10px 20px;font-family:Merriweather,serif;cursor:pointer;text-align:center}.custom-file-input[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;left:0;top:0;opacity:0;width:100%;height:100%;cursor:pointer}.custom-file-input[_ngcontent-%COMP%]:hover{background-color:var(--institutional-yellow);color:var(--text-white)}.file-name[_ngcontent-%COMP%]{font-size:14px;color:var(--institutional-blue);font-family:Merriweather,serif}.upload-button[_ngcontent-%COMP%]{background-color:var(--text-white);border:2px solid var(--institutional-yellow);border-radius:10px;padding:10px 20px;color:var(--institutional-blue);font-size:16px;cursor:pointer;width:100%;transition:background-color .3s,color .3s}.upload-button[_ngcontent-%COMP%]:disabled{background-color:#ccc;color:#666;cursor:not-allowed}.upload-button[_ngcontent-%COMP%]:hover:enabled{background-color:var(--institutional-yellow);color:var(--text-white)}.preview-container[_ngcontent-%COMP%]{width:100%;height:30vh;display:flex;justify-content:center;align-items:center;background-color:var(--text-white);border:2px solid var(--institutional-yellow);border-radius:10px;padding:10px;box-sizing:border-box}.preview-image[_ngcontent-%COMP%]{max-width:90%;max-height:30vh;border-radius:10px}.modal-icon[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:50%;max-height:90vh;background-color:var(--text-white);border:2px solid var(--institutional-yellow);border-radius:10px;box-shadow:0 4px 8px #0003;overflow-y:auto;overflow-x:hidden;padding:20px;z-index:1000}.icon-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90%;margin:0 auto;display:block;padding:10px;font-size:16px;border:2px solid var(--institutional-yellow);border-radius:5px;outline:none;font-family:Merriweather,sans-serif}.icon-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:15px;padding:10px 0}.icon-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:10px;border:2px solid var(--institutional-yellow);border-radius:10px;background-color:var(--light-beige);cursor:pointer;transition:transform .2s,background-color .2s}.icon-card[_ngcontent-%COMP%]:hover{transform:scale(1.05);background-color:var(--institutional-yellow);color:var(--text-white)}.icon-display[_ngcontent-%COMP%]{font-size:24px;margin-bottom:5px}.icon-name[_ngcontent-%COMP%]{text-align:center;font-size:14px;font-family:Merriweather,sans-serif;color:var(--institutional-blue)}.modal-poi[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:40%;max-height:80vh;background-color:var(--text-white);border:2px solid var(--institutional-yellow);border-radius:10px;box-shadow:0 4px 8px #0003;overflow-y:auto;padding:20px;z-index:1000}.modal-content-poi[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.close-poi[_ngcontent-%COMP%]{font-size:24px;font-weight:700;cursor:pointer;color:var(--institutional-blue);position:absolute;top:10px;right:15px}h3[_ngcontent-%COMP%]{font-family:Merriweather,sans-serif;color:var(--institutional-blue);text-align:center;margin-bottom:10px}.poi-label[_ngcontent-%COMP%]{font-size:16px;color:var(--institutional-blue);font-family:Merriweather,sans-serif}.poi-input[_ngcontent-%COMP%]{width:95%;max-width:100%;padding:10px;border:2px solid var(--institutional-yellow);border-radius:5px;font-family:Merriweather,sans-serif;box-sizing:border-box}.poi-button[_ngcontent-%COMP%]{width:95%;padding:10px;background-color:var(--institutional-yellow);color:var(--text-white);border:none;border-radius:5px;cursor:pointer;font-family:Merriweather,sans-serif;transition:background-color .3s ease}.poi-button[_ngcontent-%COMP%]:hover{background-color:var(--institutional-blue)}.map-selection-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.map-selection-content[_ngcontent-%COMP%]{background-color:var(--text-white);border:2px solid var(--institutional-yellow);border-radius:10px;width:400px;padding:20px;box-shadow:0 0 10px #0000004d;font-family:Merriweather,serif}.map-selection-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;font-size:20px;font-weight:700;color:var(--institutional-blue);cursor:pointer}.map-selection-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:700;color:var(--institutional-blue)}.map-selection-select[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:20px;border:2px solid var(--institutional-yellow);border-radius:8px;font-size:14px;font-family:Merriweather,serif;background-color:var(--light-beige);color:var(--institutional-blue)}.map-selection-button[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px;border:2px solid var(--institutional-yellow);border-radius:8px;background-color:var(--institutional-yellow);color:var(--text-white);cursor:pointer}.map-selection-button[_ngcontent-%COMP%]:disabled{background-color:#ccc;border-color:#ccc;color:#666;cursor:not-allowed}.map-selection-button[_ngcontent-%COMP%]:hover:enabled{background-color:var(--institutional-blue);color:var(--text-white)}']})};var Ge=[{path:"",component:R},{path:"map/:id_map",component:j}],U=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=A({type:o});static \u0275inj=F({imports:[Z.forChild(Ge),Z]})};var _e=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=A({type:o});static \u0275inj=F({imports:[W,U]})};export{_e as MapsModule};
